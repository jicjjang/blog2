<!DOCTYPE html><html><head><link rel="canonical" href="https://jicjjang.github.io"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Lora|Space+Mono:700"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,400italic,300italic,300,500italic,700,700italic,900,900italic"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/default.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script><title>June blog</title><link rel="stylesheet" href="/static/css/main.css"/><link rel="stylesheet" href="/static/css/spinner.css"/><link rel="icon" href="/static/favicon.png"/><link rel="alternate" hrefLang="x-default" href="https://jicjjang.github.io"/><link rel="alternate" hrefLang="ko-kr" href="https://jicjjang.github.io"/><meta http-equiv="cache-control" content="Public"/><meta http-equiv="Expires" content="1800"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="This blog has been used since 2019 using Nextjs with Reactjs"/><meta name="author" content="Junseok, Choi &lt;jicjjang12@gmail.com&gt;"/><meta name="google-site-verification" content="DL3OehOD_wV9A1S0SRWoeXbMtlE5SeUZPlwGrFvPHQ8"/><meta name="naver-site-verification" content="a914a06593ce48762aa25cbb7d5e96042da6e549"/><meta name="robots" content="index,follow"/><meta name="og:type" content="blog"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="@jicjjang"/><meta name="twitter:site" content="June"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css"/><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/><meta charSet="utf-8"/><title>자바스크립트 성능 최적화 4 - June blog</title><meta name="og:title" content="자바스크립트 성능 최적화 4"/><meta name="og:url" content="https://jicjjang.github.io/post/javascript-optimize-4"/><meta name="og:site_name" content="자바스크립트 성능 최적화 4"/><meta name="og:description" content="자바스크립트 성능 최적화 4"/><meta name="og:image" content="https://jicjjang.github.io/static/image/javascript/optimize/background.jpg"/><meta name="twitter:description" content="자바스크립트 성능 최적화 4"/><meta name="twitter:title" content="자바스크립트 성능 최적화 4"/><meta name="twitter:url" content="https://jicjjang.github.io/post/javascript-optimize-4"/><meta name="twitter:site" content="https://jicjjang.github.io/post/javascript-optimize-4"/><meta name="twitter:domain" content="https://jicjjang.github.io/post/javascript-optimize-4"/><meta name="twitter:image" content="https://jicjjang.github.io/static/image/javascript/optimize/background.jpg"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/post.js" as="script"/><link rel="preload" href="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.15c31151fcdd343a2908.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-702dd6d8b1f9483d47f1.js" as="script"/></head><body><div id="__next"><main><article itemProp="blogPost" itemscope="" itemType="http://schema.org/BlogPosting"><header class="section-padding--lg mast"><a class="nav nav--white" itemProp="url" href="/"><i class="fa fa-lg fa-arrow-left"></i><span>Back to Posts</span></a><figure class="absolute-bg mast__img" style="background-image:url(/static/image/javascript/optimize/background.jpg)"></figure><div class="mast__container"><span><time itemProp="datePublished">5 / 19, 2017</time></span><h1 itemProp="name headline">자바스크립트 성능 최적화 4</h1><span>Posted in <!-- -->Javascript</span></div></header><section class="section-padding post markdown-body" itemProp="articleBody"><p>4장 시작하겠습니다.</p>
<h2 id="4-알고리즘과-흐름-제어">4. 알고리즘과 흐름 제어</h2>
<h3 id="4-1-루프">4-1. 루프</h3>
<p>언어 대부분에서의 코드 실행 시간을 대부분 루프에서 소비합니다.
그만큼 성능을 많이 좌우한다고 할 수 있습니다.</p>
<ol>
<li>for</li>
<li>for-in</li>
<li>while</li>
<li>do-while</li>
</ol>
<p>4가지의 반복문의 성능은 거진 비슷하지만, for-in은 특히나 성능이 좋지 않습니다.
반복할 때마다 인스턴스 또는 프로토타입 체인을 검색해야 하므로 느릴 수 밖에 없습니다.
그렇기 때문에 개수를 지정하여 반복문을 돌리는 것이 훨씬 효율적입니다.</p>
<p>루프의 종류를 제외하고 루프의 성능을 올리기 위한 방법은 무엇이 있을까요?</p>
<hr>
<p>루프 안에서의 일 줄이기</p>
<pre><code class="language-javascript">for (var i = 0; i &lt; items.length; i++) {
  process(items[i]);
}
var j = 0;
while(j &lt; items.length) {
  process(itmes[j++]);
}
var k = 0;
do {
  process(itmes[k++]);
} while (k &lt; items.length);</code></pre>
<p>이 코드에서 일어나는 일은</p>
<ol>
<li>itmes 검색 (items)</li>
<li>조건 비교 (i &lt; itmes.length)</li>
<li>조건이 true인지 false인지 비교 (i &lt; itmes.length == true)</li>
<li>증가 연산 (i++)</li>
<li>배열 검색 (items[i])</li>
<li>함수 호출 (process(itmes[i]))</li>
</ol>
<p>총 6가지 입니다. 우선 length를 조회하는 부분을 최적화 해보겠습니다.</p>
<pre><code class="language-javascript">for (var i = 0, len = items.length; i &lt; len; i++) {
  process(items[i]);
}
var j = 0,
    count = items.length;
while(j &lt; count) {
  process(itmes[j++]);
}
var k = 0;
    num = items.length;
do {
  process(items[k++]);
} while (k &lt; num);</code></pre>
<p>이번에는 비교하는 부분을 최적화 해봅시다.</p>
<pre><code class="language-javascript">for (var i = items.length; i--; ) {
  process(items[i]);
}
var j = items.length;
while(j--) {
  process(itmes[j]);
}
var k = items.length-1;
do {
  process(items[k]);
} while (k--);</code></pre>
<p>조건 부분이 0이 되면 자동으로 false가 되는 자바스크립트의 특징을 이용한 것입니다.</p>
<hr>
<p>반복을 줄이기</p>
<p>process를 호출하는 부분을 반복마다 여러개를 두는 것입니다.</p>
<p>100번의 반복을 돌릴 일을 10번의 반복문을 돌리며, 1번 반복이 실행될 때마다
프로세스를 10번 실행시키는 것이다. 이 일은 반복 횟수를 알 경우 사용하는게 적당합니다.</p>
<h2 id="4-2-조건문">4-2. 조건문</h2>
<p>if-else 문과 switch 문이 있습니다. 우선 if-else 문 부터 확인 해보겠습니다.</p>
<pre><code class="language-javascript">if (value &lt; 5) {
  ...
} else if (value &gt; 5 &amp;&amp; value &lt; 10) {
  ...
} else {
  ...
}</code></pre>
<p>이 코드가 효과적인 경우는 value가 5보다 작은 값이 가장 많을 때 입니다.
첫 조건에서 가장 많은 값을 걸러내면 그 다음 조건까지 들어갈 일이 줄어들기 때문입니다.
조건문의 최적화는 조건문을 중첩시키는 것입니다.</p>
<p>그리고 조건이 많아질수록 성능이 저하됨은 당연지사 하겠죠. 조건이 3가지 이상 겹쳐질 경우
switch가 더 효율적입니다.</p>
<pre><code class="language-javascript">if (value == 0) {
  return result 0;
} else if (value == 1) {
  return result 1;
} else if (value == 2) {
  return result 2;
} else if (value == 3) {
  return result 3;
} else if (value == 4) {
  return result 4;
} else if (value == 5) {
  return result 5;
}</code></pre>
<p>위 코드의 성능을 향상시켜 보겠습니다.</p>
<pre><code class="language-javascript">if (value &lt; 6) {
  if (value &lt; 3) {
    if (value == 0) {
      return result 0;
    } else if (value == 1) {
      return result 1;
    } else if (value == 2) {
      return result 2;
    }
  } else {
    if (value == 3) {
      return result 3;
    } else if (value == 4) {
      return result 4;
    } else if (value == 5) {
      return result 5;
    }
  }
} else if (...) {
  ...
}</code></pre>
<p>비교하는 횟수를 최소화할 수 있습니다. 이진 트리 검색과 비슷합니다.</p>
<h3 id="4-3-재귀">4-3. 재귀</h3>
<p>브라우저에서의 재귀는 콜 스택 제한 때문에 위험할 수 있습니다.
또한 브라우저마다 에러 메세지가 다르기 때문에 조심해야 합니다.
(try-catch로 잡을 수는 있습니다.)</p>
<hr>
<p>재귀로 구현할 수 있는 알고리즘은 모두 반복문으로 만들 수 있습니다.
루프상의 성능 문제가 발생할 수 있으나, 함수상의 성능 문제보다 부하가 낮아서
재귀보다는 반복문이 더 나을 수 있습니다.</p>
<hr>
<p>factorial 함수와 같은 재귀함수는 동일한 일을 지속적으로 반복합니다.
그래서 이미 했던 일을 저장해 성능을 향상시킬 수 있습니다.</p>
<pre><code class="language-javascript">function memfactorial(n) {
  if (!memfactorial.cache) {
    memfactorial.cache = {
      &#39;0&#39;: 1,
      &#39;1&#39;: 1
    };
  }
  if (!memfactorial.cache.hasOwnProperty(n)) {
    memfactorial.cache[n] = n * memfactorial(n-1);
  }
  return memfactorial.cache[n];
}</code></pre>
<p>코드를 보면 알 수 있겠지만, 이전에 계산한 값을 memfactorial.cache에 누적시키는 기능을 추가했습니다.
성능이 아주 중요한 함수는 이러한 <code>메모이제이션</code> 기능을 <code>직접</code> 추가하는 것이 좋습니다.</p>
<hr>
<p>4장도 모두 포스팅했습니다. 정규표현식(5장)은 일단 건너뛰고 진행하려합니다.
남은 장도 열심히 포스팅하겠습니다!</p>
</section><section class="profile"><div class="profile__card"><div class="profile__img"><figure class="absolute-bg" style="background-image:url(/static/image/mine.jpg)"></figure></div><div class="profile__container"><p>프론트 개발을 좋아하고 꾸준히 공부하는 백엔드 개발자. 새로운 기술에 관심이 많음. React + Vue 개발 진행중. 현재 Kakaopay 재직중.</p><ul class="profile__social"><li><a class="fa fa-lg fa-envelope-o" href="mailto:jicjjang12@gmail.com"></a></li><li><a class="fa fa-lg fa-github" href="https://github.com/jicjjang" target="_blank"></a></li><li><a class="fa fa-lg fa-linkedin" href="https://www.linkedin.com/in/jicjjang" target="_blank"></a></li><li><a class="fa fa-lg fa-instagram" href="https://instagram.com/jicjjang" target="_blank"></a></li></ul></div></div></section></article><section class="next"><a class="next__link" itemProp="url" style="background-image:url(/static/image/javascript/optimize/background.jpg)" href="/post/javascript-optimize-6/"><div class="next__container"><span>Read Next</span><h2>자바스크립트 성능 최적화 6</h2></div></a></section><div id="disqus_thread" style="margin:50px 10% 0 10%"></div></main></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{"postId":"javascript-optimize-4"}},"page":"/post","query":{"id":"javascript-optimize-4"},"buildId":"1K6jiUe679ZNAQ69RjW6W","nextExport":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-ebd4705da3402b2d78e1.js"></script><script async="" data-next-page="/post" src="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/post.js"></script><script async="" data-next-page="/_app" src="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/_app.js"></script><script src="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" async=""></script><script src="/_next/static/chunks/commons.15c31151fcdd343a2908.js" async=""></script><script src="/_next/static/runtime/main-702dd6d8b1f9483d47f1.js" async=""></script><script src="/static/script/google-analytics.js"></script></body></html>