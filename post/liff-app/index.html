<!DOCTYPE html><html><head><link rel="canonical" href="https://jicjjang.github.io"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Lora|Space+Mono:700"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,400italic,300italic,300,500italic,700,700italic,900,900italic"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/default.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script><title>June blog</title><link rel="stylesheet" href="/static/css/main.css"/><link rel="stylesheet" href="/static/css/spinner.css"/><link rel="icon" href="/static/favicon.png"/><link rel="alternate" hrefLang="x-default" href="https://jicjjang.github.io"/><link rel="alternate" hrefLang="ko-kr" href="https://jicjjang.github.io"/><meta http-equiv="cache-control" content="Public"/><meta http-equiv="Expires" content="1800"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="This blog has been used since 2019 using Nextjs with Reactjs"/><meta name="author" content="Junseok, Choi &lt;jicjjang12@gmail.com&gt;"/><meta name="google-site-verification" content="DL3OehOD_wV9A1S0SRWoeXbMtlE5SeUZPlwGrFvPHQ8"/><meta name="naver-site-verification" content="a914a06593ce48762aa25cbb7d5e96042da6e549"/><meta name="robots" content="index,follow"/><meta name="og:type" content="blog"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="@jicjjang"/><meta name="twitter:site" content="June"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css"/><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/><meta charSet="utf-8"/><title>심심풀이 LIFF 앱개발 - June blog</title><meta name="og:title" content="심심풀이 LIFF 앱개발"/><meta name="og:url" content="https://jicjjang.github.io/post/liff-app"/><meta name="og:site_name" content="심심풀이 LIFF 앱개발"/><meta name="og:description" content="블로그 업뎃이 너무 없어 심심풀이로 만드는 Liff 앱"/><meta name="og:image" content="https://jicjjang.github.io/static/image/etc/liff/background.jpg"/><meta name="twitter:description" content="블로그 업뎃이 너무 없어 심심풀이로 만드는 Liff 앱"/><meta name="twitter:title" content="심심풀이 LIFF 앱개발"/><meta name="twitter:url" content="https://jicjjang.github.io/post/liff-app"/><meta name="twitter:site" content="https://jicjjang.github.io/post/liff-app"/><meta name="twitter:domain" content="https://jicjjang.github.io/post/liff-app"/><meta name="twitter:image" content="https://jicjjang.github.io/static/image/etc/liff/background.jpg"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/post.js" as="script"/><link rel="preload" href="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.15c31151fcdd343a2908.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-702dd6d8b1f9483d47f1.js" as="script"/></head><body><div id="__next"><main><article itemProp="blogPost" itemscope="" itemType="http://schema.org/BlogPosting"><header class="section-padding--lg mast"><a class="nav nav--white" itemProp="url" href="/"><i class="fa fa-lg fa-arrow-left"></i><span>Back to Posts</span></a><figure class="absolute-bg mast__img" style="background-image:url(/static/image/etc/liff/background.jpg)"></figure><div class="mast__container"><span><time itemProp="datePublished">7 / 9, 2018</time></span><h1 itemProp="name headline">심심풀이 LIFF 앱개발</h1><span>Posted in <!-- -->Frontend</span></div></header><section class="section-padding post markdown-body" itemProp="articleBody"><p>이직을 하고 한달도 되지 않아 회사가 이사를 하고, 집이 이사를 하고... 바쁘다는 핑계로
방탕한(커밋을 하지 않으면 방탕한 인생이지...만 삶의 질이 올라갔다!) 삶을 보내고 있습니다.
이런 삶을 좀 청산하고자... 블로그로 가벼운 스타트를 하려 합니다 ㅋㅋ</p>
<hr>
<p>책좀 읽고 뒹굴뒹굴 거리다 라인에서 <a href="https://engineering.linecorp.com/ko/blog/detail/299">LIFF</a>
라는 프로젝트를 진행하고 있는 것을 보았습니다. 라인앱의 App Scheme을 만들어서 사용할 수 있게 해주는 프레임워크로,
간단히 만드는 과정 및 후기를 남기려 합니다.</p>
<p>만드는 과정을 설명한다곤 했으나, 이미 라인에서 훌륭한
<a href="https://developers.line.me/en/docs/liff/overview/">가이드라인</a>을 작성해 놨습니다.
훌륭한 독해 실력과! 리뷰따위는 필요가 없으신 고수님들은! (따흐흑) 가이드 라인을 따라가셔도 <del>안</del>됩니다.</p>
<p><img src="https://jicjjang.github.io/static/image/etc/liff/liff1.png" alt="liff1"></p>
<p>오늘 만져볼 liff의 구현체는 위와 같은 모양으로 나올 겁니다. 여러 사이즈에 대한 App Scheme이
미리 정의되어 있습니다.</p>
<p><img src="https://jicjjang.github.io/static/image/etc/liff/liff2.png" alt="liff2"></p>
<p>계정을 만들고, 앱을 만들어서 배포하고, LIFF에 App을 등록하는 순서대로 진행하겠습니다.</p>
<hr>
<h2 id="1-계정계">1. 계정계</h2>
<p>가장 기본적으로 라인 App Scheme에 등록할 앱을 등록할
<a href="https://developers.line.me/en/docs/liff/getting-started/#spy-creating-a-channel">계정</a>
을 만듭니다. 계정을 만들고 나서는 <code>Provider</code>와 <code>Channel</code>을 만들어 주셔야 합니다.
<code>Provider</code>는 제공할 기능들에 대한 그룹, <code>Channel</code>은 그룹에 대한 제공할 기능 단위라고 생각해주시면 됩니다.</p>
<h3 id="꿀팁">꿀팁</h3>
<p>문서에는 안나와있고, 해보면 알 수 있는 부분이지만 <code>Channel</code>을 만들 때, 2가지 경우가 있습니다.
바로 <code>Login API</code>, <code>Message API</code>가 있는데요, 문서에는 <code>Message API</code>만 만들어서 보여주기 때문에
뭘 선택하라는 거지... 했습니다. 두 가지 케이스는 동일하고 이름에서 보이듯 <code>Login API</code>에서는
<code>Message API</code>전에 앱에 대한 로그인이 추가되는 API 입니다.
(아마 앱에다가 로그인 세션을 넣어주기 위해 재로그인 하는 듯 하다!)</p>
<p>우리가 할 테스트엔 Login이 따로 필요 없으니, <code>Message API</code>로 충분합니다.</p>
<h2 id="2-앱-개발--배포">2. 앱 개발 &amp; 배포</h2>
<h3 id="2-1-앱-개발">2-1. 앱 개발</h3>
<p>앱을 개발해줍니다. 문서에서는 heroku로 배포하는 것으로 되어있는데요, SSL 인증이 들어간 https 프로토콜로
만들어진 도메인이라면 굳이 heroku로 배포할 필요 없이, 본인이 배포할 서버로 넣어주시면 됩니다.</p>
<h3 id="2-2-배포">2-2. 배포</h3>
<p><a href="https://github.com/line/line-liff-starter">line-liff-starter</a>로 만들어진 프로젝트를
heroku에 배포하여 테스트 해볼 수 있는데요! 오늘 배포는 이 프로젝트로 진행할 예정입니다.
(앱 개발에 대해서는 추후에)</p>
<p><img src="https://jicjjang.github.io/static/image/etc/liff/liff3.png" alt="liff3"></p>
<p>위 링크를 타고 들어가 보라색 버튼의 heroku를 클릭하여 heroku에 배포할 수 있습니다.
(계정은 직접 만들어주세요)</p>
<p>그럼 간단한 <a href="(https://liff-starter-test-app.herokuapp.com/">테스트용 웹페이지</a>가 나옵니다.
비어있는 정보들에 대해선 liff의 데이터가 들어가니, liff에 추가된 후 확인해 봅시다.</p>
<h2 id="3-스크립팅">3. 스크립팅</h2>
<p>몇번의 스크립트를 넣는 작업이 필요합니다. 계정의 access_token을 얻고, 해당하는 access_token에
App을 등록하는 작업입니다. 물론 넣은 이후에 url이나 화면의 타입 (Compact, Tall, Full)을
바꾸는 스크립트, 등록된 App list를 확인하는 스크립트, 등록된 App을 지우는 스크립트 등이 있습니다.</p>
<h3 id="3-1-access_token-얻기">3-1. access_token 얻기</h3>
<pre><code class="language-bash">curl -v -X POST <a href="https://api.line.me/v2/oauth/accessToken">https://api.line.me/v2/oauth/accessToken</a> \
-H &quot;Content-Type:application/x-www-form-urlencoded&quot; \
--data-urlencode &#39;grant_type=client_credentials&#39; \
--data-urlencode &#39;client_id={ channel ID }&#39; \
--data-urlencode &#39;client_secret={ channel secret }&#39;

# 보기좋게 정렬한 Response
# {
#   &quot;access_token&quot;: &quot;blahblah&quot;,
#   &quot;expires_in&quot;: 2592000,
#   &quot;token_type&quot;: &quot;Bearer&quot;
# }</code></pre>
<h3 id="3-2-liff에-app-등록">3-2. liff에 App 등록</h3>
<pre><code class="language-bash">curl -X POST <a href="https://api.line.me/liff/v1/apps">https://api.line.me/liff/v1/apps</a> \
-H &quot;Authorization: Bearer { channel access_token }&quot; \
-H &quot;Content-Type: application/json&quot; \
-d &#39;{
  &quot;view&quot;: {
    &quot;type&quot;: &quot;full&quot;,
    &quot;url&quot;: &quot;<a href="https://liff-starter-test-app.herokuapp.com/">https://liff-starter-test-app.herokuapp.com/</a>&quot;
  }
}&#39;

# 보기좋게 정렬한 Response
# {
#   &quot;liffId&quot;: &quot;1142586872-1234567&quot;
# }</code></pre>
<h2 id="3-테스트하기">3. 테스트하기!</h2>
<p><code>line://app/{ liffId }</code> 링크로 이동하면 됩니다. (Line App을 설치한 모바일에서만 가능)</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/liff/liff4.jpeg" alt="image" style="width:50%; margin:0 auto;">
</figure>

<p>결과는 위 이미지처럼 나오게 됩니다. (기존 url로 들어갔을 때와는 다르게 정보들이 채워집니다.
liff에서 데이터를 가진 object를 내려줬기 때문이죠)</p>
<h2 id="4-마무리">4. 마무리</h2>
<p>위 예제들이 기본이고, 이를 활용한 앱을 만들면 됩니다.
(물론 저도 이달안에 만들 앱에 대한 고민을 해놓음!)</p>
<h3 id="참고-1-login-api">참고 1. Login API</h3>
<p>제일 처음에 <code>Channel</code>을 만들 때, <code>Login API</code>를 선택한다면</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/liff/liff5.jpeg" alt="image" style="width:50%; margin:0 auto;">
</figure>

<p>라는 화면 이 먼저 뜨게 됩니다.</p>
<h3 id="참고-2-sendmessage">참고 2. sendMessage</h3>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/liff/liff6.jpeg" alt="image" style="width:50%; margin:0 auto;">
</figure>

<p><a href="https://github.com/line/line-liff-starter/issues/1">line-liff-starter issue</a>
에서 보실 수 있듯이 특정 디바이스에서의 <code>sendMessage 버튼</code>을 누르면 위와 같은 이슈가 나타납니다.
이점 유의해서 테스트 해주세요.</p>
<hr>
<p>오랜만에 블로그 글을 쓰려니 간단한 리뷰임에도 시간이 조금 걸렸습니다.
이런 식으로 App Scheme을 사용자가 생성하도록 공유하는 방식은 개인적으로 처음 보았는데
활용함에 따라 개발 유저들을 끌어들일 수 있는 요소가 될 수 있다고 느꼈습니다.
위에 작성한대로 이달 안에 뭔가 재밌는걸 해보려고 하는데 저도 기대되네요 ㅎㅎ</p>
</section><section class="profile"><div class="profile__card"><div class="profile__img"><figure class="absolute-bg" style="background-image:url(/static/image/mine.jpg)"></figure></div><div class="profile__container"><p>프론트 개발을 좋아하고 꾸준히 공부하는 백엔드 개발자. 새로운 기술에 관심이 많음. React + Vue 개발 진행중. 현재 Kakaopay 재직중.</p><ul class="profile__social"><li><a class="fa fa-lg fa-envelope-o" href="mailto:jicjjang12@gmail.com"></a></li><li><a class="fa fa-lg fa-github" href="https://github.com/jicjjang" target="_blank"></a></li><li><a class="fa fa-lg fa-linkedin" href="https://www.linkedin.com/in/jicjjang" target="_blank"></a></li><li><a class="fa fa-lg fa-instagram" href="https://instagram.com/jicjjang" target="_blank"></a></li></ul></div></div></section></article><section class="next"><a class="next__link" itemProp="url" style="background-image:url(/static/image/review/think-data-structures/background.jpg)" href="/post/review-think-data-structures/"><div class="next__container"><span>Read Next</span><h2>[Review] Think Data Structures</h2></div></a></section><div id="disqus_thread" style="margin:50px 10% 0 10%"></div></main></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{"postId":"liff-app"}},"page":"/post","query":{"id":"liff-app"},"buildId":"1K6jiUe679ZNAQ69RjW6W","nextExport":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-ebd4705da3402b2d78e1.js"></script><script async="" data-next-page="/post" src="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/post.js"></script><script async="" data-next-page="/_app" src="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/_app.js"></script><script src="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" async=""></script><script src="/_next/static/chunks/commons.15c31151fcdd343a2908.js" async=""></script><script src="/_next/static/runtime/main-702dd6d8b1f9483d47f1.js" async=""></script><script src="/static/script/google-analytics.js"></script></body></html>