<!DOCTYPE html><html><head><link rel="canonical" href="https://jicjjang.github.io"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Lora|Space+Mono:700"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,400italic,300italic,300,500italic,700,700italic,900,900italic"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/default.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script><title>June blog</title><link rel="stylesheet" href="/static/css/main.css"/><link rel="stylesheet" href="/static/css/spinner.css"/><link rel="icon" href="/static/favicon.png"/><link rel="alternate" hrefLang="x-default" href="https://jicjjang.github.io"/><link rel="alternate" hrefLang="ko-kr" href="https://jicjjang.github.io"/><meta http-equiv="cache-control" content="Public"/><meta http-equiv="Expires" content="1800"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="This blog has been used since 2019 using Nextjs with Reactjs"/><meta name="author" content="Junseok, Choi &lt;jicjjang12@gmail.com&gt;"/><meta name="google-site-verification" content="DL3OehOD_wV9A1S0SRWoeXbMtlE5SeUZPlwGrFvPHQ8"/><meta name="naver-site-verification" content="a914a06593ce48762aa25cbb7d5e96042da6e549"/><meta name="robots" content="index,follow"/><meta name="og:type" content="blog"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="@jicjjang"/><meta name="twitter:site" content="June"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css"/><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/><meta charSet="utf-8"/><title>Dooray bot scheduler (Front) - June blog</title><meta name="og:title" content="Dooray bot scheduler (Front)"/><meta name="og:url" content="https://jicjjang.github.io/post/dooray-bot-front"/><meta name="og:site_name" content="Dooray bot scheduler (Front)"/><meta name="og:description" content="사내 메신저 봇 스케쥴러 만들기"/><meta name="og:image" content="https://jicjjang.github.io/static/image/etc/dooray/background.png"/><meta name="twitter:description" content="사내 메신저 봇 스케쥴러 만들기"/><meta name="twitter:title" content="Dooray bot scheduler (Front)"/><meta name="twitter:url" content="https://jicjjang.github.io/post/dooray-bot-front"/><meta name="twitter:site" content="https://jicjjang.github.io/post/dooray-bot-front"/><meta name="twitter:domain" content="https://jicjjang.github.io/post/dooray-bot-front"/><meta name="twitter:image" content="https://jicjjang.github.io/static/image/etc/dooray/background.png"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/post.js" as="script"/><link rel="preload" href="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.15c31151fcdd343a2908.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-702dd6d8b1f9483d47f1.js" as="script"/></head><body><div id="__next"><main><article itemProp="blogPost" itemscope="" itemType="http://schema.org/BlogPosting"><header class="section-padding--lg mast"><a class="nav nav--white" itemProp="url" href="/"><i class="fa fa-lg fa-arrow-left"></i><span>Back to Posts</span></a><figure class="absolute-bg mast__img" style="background-image:url(/static/image/etc/dooray/background.png)"></figure><div class="mast__container"><span><time itemProp="datePublished">6 / 27, 2017</time></span><h1 itemProp="name headline">Dooray bot scheduler (Front)</h1><span>Posted in <!-- -->Etc</span></div></header><section class="section-padding post markdown-body" itemProp="articleBody"><p><h3 id="-이-글은-사내-메신저인-dooray에서-활용할-bot-scheduler에-대한-소개로-비정상적인-경로로의-접근은-하지-말아주시기-바랍니다-">!!! 이 글은 사내 메신저인 Dooray에서 활용할 bot scheduler에 대한 소개로, 비정상적인 경로로의 접근은 하지 말아주시기 바랍니다. !!!</h3></p>
<p><hr></p>
<p>사내 메신저인 Dooray의 메뉴봇과 스케쥴러를 만들어서 공유드립니다.
(매주 메뉴 이미지 1번을 넣어야 되는 귀찮음을 제외하고는 정말 편합니다.)</p>
<hr>
<p>사실 <code>&quot;git repository를 드리고 끝!! README를 보세요!!&quot;</code> 할 수 있지만, 설정하는 방법이 조금... 까다롭습니다.
그래서 <code>README</code>를 어떻게 정리하면서 생각해보면서 내용을 공유해보고자 작성하게 되었습니다.</p>
<h1 id="1-dooray-hooker-front">1. <a href="https://github.com/jicjjang/DoorayHookerFront">Dooray Hooker Front</a></h1>
<h2 id="1-1-설정-파일">1-1. 설정 파일</h2>
<p>Front 페이지로, vue를 사용해 만들었습니다. 딱히 서비스를 할 생각 없이 개인 자리에서 돌리는 서비스이기 때문에</p>
<pre><code class="language-bash">$ git clone <a href="https://github.com/jicjjang/DoorayHookerFront">https://github.com/jicjjang/DoorayHookerFront</a>
$ cd DoorayHookerFront
$ npm install
$ npm run dev</code></pre>
<p>명령어로 간단하게 npm을 설치하고 서버를 띄워줍니다.
그러면 바로</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/error1.png" alt="image" style="display:inline-block; width:80%; margin:0 auto;">
</figure>

<p>이런 에러가 발생합니다. 에러 내용대로 <code>src/config.js</code> 파일을 만들어줍니다. 이 때 참고해야 할 <code>ex.config.js</code> 파일이 있습니다.</p>
<pre><code class="language-javascript">export const FIREBASE_URL = &#39;FIREBASE_URL&#39;</code></pre>
<p>firebase url은 스케쥴러가 돌면서 메세지를 보낼 데이터를 저장하기 위해 사용됩니다.</p>
<h2 id="1-2-firebase-설정">1-2. firebase 설정</h2>
<p>우선 <a href="https://firebase.google.com/">https://firebase.google.com/</a> 로 이동합니다.</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/firebase/setting1.png" alt="image" style="display:inline-block; width:80%; margin:0 auto;">
</figure>

<p>로그인 후, 오른쪽 상단의 <code>&quot;콘솔로 이동&quot;</code> 버튼을 이용해 콘솔로 들어갑니다.</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/firebase/setting2.png" alt="image" style="display:inline-block; width:80%; margin:0 auto;">
</figure>

<p>콘솔로 이동하시면 프로젝트들이 나옵니다. 여기서 프로젝트를 하나 추가해줍니다.
빈칸을 채워 앱을 만들면 아래 이미지와 같은 화면이 뜨는데, 이 동그란 세개의 버튼은 firebase로 서버 자체를 대체하는 앱을 만들 때 사용합니다.
하지만 저희는 DB만 사용할 예정이니 신경쓰지 마시고, 왼쪽 리스트 중 <code>&quot;Database&quot;</code>를 선택합니다.</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/firebase/setting3.png" alt="image" style="display:inline-block; width:80%; margin:0 auto;">
</figure>

<p>먼저 <code>&quot;Database&quot;</code>의 Rule을 정해봅시다. 이 DB에 접근할 수 있는 권한을 부여한다면, 접근할 수 있는 인증이 필요합니다.
현재는 인증에 대한 기능은 없기 때문에 read, write를 true로 줬습니다.</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/firebase/setting4.png" alt="image" style="display:inline-block; width:80%; max-width:500px; margin:0 auto;">
</figure>

<p>이제 마지막으로 <code>&quot;데이터&quot;</code> 탭으로 갑니다. 이 부분에 url이 있습니다. <code><a href="https://xxxxxxx.firebaseio.com">https://xxxxxxx.firebaseio.com</a></code> 과 같은 url을 복사합니다.</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/firebase/setting5.png" alt="image" style="display:inline-block; width:80% ;max-width:500px; margin:0 auto;">
</figure>

<p>그리고 우리의 목표인 src/config.js 파일을 채웁니다.</p>
<pre><code class="language-javascript">// ~~~.com/ 과 같이 제일 마지막에 &#39;/&#39; 는 포함시키지 마세요.
export const FIREBASE_URL = &#39;<a href="https://xxxxxxx.firebaseio.com&amp;#39">https://xxxxxxx.firebaseio.com&amp;#39</a>;</code></pre>
<h2 id="1-3-사용-방법">1-3. 사용 방법</h2>
<p>처음 실행해주셨던</p>
<pre><code class="language-bash">$ npm run dev</code></pre>
<p>명령어를 다시 실행합니다. (서버를 끄지 않으셨다면 자동으로 리프레시가 되어있을 겁니다.)
그러면 아래와 같은 화면에 Scheduler List만 없이 나올것입니다. 이제 스케쥴을 등록해주시면 됩니다!</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/front1.png" alt="image" style="display:inline-block; width:80%; margin:0 auto;">
</figure>

<h3 id="1-3-1-id">1-3-1. ID</h3>
<p>봇에 관심을 두셨던 분들이라면 다 알만한 내용입니다.
봇으로 메세지를 보내려면 채팅방의 id가 필요하겠죠??</p>
<p>아래 이미지처럼 <a href="https://nhnent.dooray.com">두레이</a> 사이트에서 설정 탭으로 들어갑니다.</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/dooray1.png" alt="image" style="display:inline-block; width:80%; max-width:500px; margin:0 auto;">
</figure>

<p>그리고 <code>&quot;서비스 연동&quot;</code>에서 서비스를 추가합니다. 추가 후 나오는 url을 복사해야 하는데, 이 url이 바로 ID가 됩니다!</p>
<figure style="text-align: center;">
  <img src="https://jicjjang.github.io/static/image/etc/dooray/scheduleFront/dooray2.png" alt="image" style="display:inline-block; width:80%; max-width:500px; margin:0 auto;">
</figure>


<h3 id="1-4-사용">1-4. 사용</h3>
<p>1-3-1 에서 구한 ID (url)를 <code>Add Scheduler</code>의 ID에 입력해줍니다. 나머지는 원하시는대로 빈칸을 채워주시면 됩니다. (등록된 스케쥴을 클릭하여 수정 및 삭제 가능합니다.)</p>
<p><code>Description</code>: 메세지 보낼 때 사용되지는 않습니다. Scheduler List를 공유하는 인원들이 알아볼 수 있도록 쓰는 설명입니다.
<code>Hook Type</code>: 메세지와 메뉴를 선택할 수 있습니다. 메뉴 선택 시 점심과 저녁을 추가적으로 고를 수 있습니다.
<code>Image Url</code>: 봇의 이미지입니다. (직접 업로드는 불가능합니다 ㅠㅠ)
<code>Hook Time</code>: 메세지를 보낼 시간입니다. <code>&quot;24:00&quot;</code>과 같이 입력해주세요. (아래에서 설명드릴 서버 코드를 확인해주시면 19:00 이후 ~ 익일 10:00 까지는 퇴근 시간으로 제외되어 있습니다.)
<code>Hook Term</code>: 특정 시간마다 반복되는 동작을 할 수 있습니다. (5분 간격, 10분 간격...)
<code>Bot Name</code>: 봇의 이름입니다.
<code>Bot Text</code>: 봇의 메세지 내용입니다. (Hook Type을 메뉴로 하셔도 메세지가 보내집니다.)</p>
<hr>
<p>쓰다보니 내용이 길어졌네요... 이제 봇을 만들고 관리하는 Front 페이지에 대한 설명이 끝났습니다.
서버에 대한 내용은 다른 게시물에 따로 게시하겠습니다.</p>
<p>감사합니다.</p>
</section><section class="profile"><div class="profile__card"><div class="profile__img"><figure class="absolute-bg" style="background-image:url(/static/image/mine.jpg)"></figure></div><div class="profile__container"><p>프론트 개발을 좋아하고 꾸준히 공부하는 백엔드 개발자. 새로운 기술에 관심이 많음. React + Vue 개발 진행중. 현재 Kakaopay 재직중.</p><ul class="profile__social"><li><a class="fa fa-lg fa-envelope-o" href="mailto:jicjjang12@gmail.com"></a></li><li><a class="fa fa-lg fa-github" href="https://github.com/jicjjang" target="_blank"></a></li><li><a class="fa fa-lg fa-linkedin" href="https://www.linkedin.com/in/jicjjang" target="_blank"></a></li><li><a class="fa fa-lg fa-instagram" href="https://instagram.com/jicjjang" target="_blank"></a></li></ul></div></div></section></article><section class="next"><a class="next__link" itemProp="url" style="background-image:url(/static/image/etc/dooray/background.png)" href="/post/dooray-bot-server/"><div class="next__container"><span>Read Next</span><h2>Dooray bot scheduler (Server)</h2></div></a></section><div id="disqus_thread" style="margin:50px 10% 0 10%"></div></main></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{"postId":"dooray-bot-front"}},"page":"/post","query":{"id":"dooray-bot-front"},"buildId":"1K6jiUe679ZNAQ69RjW6W","nextExport":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-ebd4705da3402b2d78e1.js"></script><script async="" data-next-page="/post" src="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/post.js"></script><script async="" data-next-page="/_app" src="/_next/static/1K6jiUe679ZNAQ69RjW6W/pages/_app.js"></script><script src="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" async=""></script><script src="/_next/static/chunks/commons.15c31151fcdd343a2908.js" async=""></script><script src="/_next/static/runtime/main-702dd6d8b1f9483d47f1.js" async=""></script><script src="/static/script/google-analytics.js"></script></body></html>